# AI Agent Best Practices Guide

This document outlines best practices for working with AI coding agents, based on industry standards and practical experience.

## Effective Prompting Strategies

### Be Specific and Clear
When requesting work from an AI agent, provide clear and specific instructions. Vague requests lead to assumptions that may not align with your expectations.

**Good example:**
```
Search for efficiency issues in the codebase, create a report documenting at least 5 issues, 
and open a PR to fix the most impactful one.
```

**Less effective:**
```
Make the code better.
```

### Provide Context
Include relevant context about your project, constraints, and preferences. This helps the agent make better decisions.

**Include:**
- Project architecture and conventions
- Coding standards and style guides
- Testing requirements
- CI/CD expectations
- Language preferences (for comments, documentation)

### Break Down Complex Tasks
For large tasks, break them into smaller, manageable pieces. This allows for better tracking and reduces the risk of errors.

**Example:**
```
1. First, analyze the codebase for performance issues
2. Create a report with your findings
3. Implement the fix for issue X
4. Add tests for the changes
5. Create a PR
```

## Code Quality Guidelines

### Follow Existing Conventions
AI agents should respect and follow the existing code conventions in a project. This includes:

- Naming conventions (camelCase, snake_case, etc.)
- File organization and structure
- Import ordering
- Comment style
- Error handling patterns

### Type Safety
Prefer type-safe constructs over dynamic typing:

- Use Enums instead of string literals for fixed sets of values
- Add type hints to function signatures
- Use dataclasses or typed dictionaries for structured data

### Performance Considerations
When writing code, consider:

- Avoid unnecessary iterations (use generators, filters)
- Implement caching for expensive operations
- Use appropriate data structures
- Consider memory usage for large datasets

## CI/CD Best Practices

### Automated Checks
Every project should have automated checks that run on every PR:

- **Linting**: Catch style issues and potential bugs early (e.g., Ruff, ESLint, Pylint)
- **Type checking**: Ensure type safety (e.g., mypy, TypeScript)
- **Testing**: Run unit and integration tests
- **Security scanning**: Check for vulnerabilities in dependencies

### GitHub Actions Example
```yaml
name: CI

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"
      - name: Install dependencies
        run: pip install ruff mypy
      - name: Run linter
        run: ruff check .
      - name: Run formatter check
        run: ruff format --check .

  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"
      - name: Install dependencies
        run: pip install -e ".[dev]"
      - name: Run tests
        run: pytest
```

## Documentation Standards

### Code Documentation
- Add docstrings to public functions and classes
- Document complex algorithms with inline comments
- Keep comments up-to-date with code changes

### Project Documentation
- Maintain a clear README with setup instructions
- Document architecture decisions
- Keep a changelog for significant changes

## Working with AI Agents

### Review AI-Generated Code
Always review code generated by AI agents:

- Check for security vulnerabilities
- Verify logic correctness
- Ensure it follows project conventions
- Test edge cases

### Iterative Refinement
Work iteratively with AI agents:

1. Start with a clear request
2. Review the output
3. Provide specific feedback
4. Repeat until satisfied

### Leverage Parallel Work
AI agents can often work on multiple tasks in parallel. Use this to your advantage:

- Request independent tasks to be done simultaneously
- Specify which tasks can be parallelized
- Monitor progress on each task

## Security Considerations

### Never Commit Secrets
- Use environment variables for sensitive data
- Add `.env` files to `.gitignore`
- Use secret management tools in CI/CD

### Validate External Input
- Sanitize user input
- Use parameterized queries for databases
- Validate API responses

### Keep Dependencies Updated
- Regularly update dependencies
- Use tools like Dependabot for automated updates
- Review security advisories

## Testing Best Practices

### Test Coverage
- Aim for meaningful test coverage, not just high percentages
- Focus on critical paths and edge cases
- Include integration tests for complex workflows

### Test Organization
```
tests/
  unit/
    test_strategies.py
    test_risk.py
  integration/
    test_backtest_runner.py
  fixtures/
    sample_data.py
```

### Mocking External Dependencies
- Mock external APIs and services in tests
- Use fixtures for consistent test data
- Isolate tests from each other

## Conclusion

Working effectively with AI agents requires clear communication, proper tooling, and good engineering practices. By following these guidelines, you can maximize the productivity gains from AI assistance while maintaining code quality and security.
